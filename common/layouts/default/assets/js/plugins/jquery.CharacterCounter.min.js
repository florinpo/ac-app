/**
 * Character counter and limiter plugin for textfield and textarea form elements
 * @author Sk8erPeter
 */ 
(function($){$.fn.characterCounter=function(j){j=$.extend({maximumCharacters:1000,minimumCharacters:0,characterCounterNeeded:true,charactersRemainingNeeded:true,chopText:false,positionBefore:false,limitExceededClass:"character-counter-limit-exceeded",charactersLabel:" characters",charactersTypedSuffix:" characters typed",charactersRemainingSuffixText:" characters left",shortFormat:false,shortFormatSeparator:"/"},j);this.each(function(){var e=$(this),$pluginElementsWrapper,$characterCounterSpan,$charactersRemainingSpan;if(!e.is("input[type=text]")&&!e.is("textarea")){return this}if(j.characterCounterNeeded||j.charactersRemainingNeeded){$pluginElementsWrapper=$('<div>',{'class':'character-counter-main-wrapper'});if(j.positionBefore){$pluginElementsWrapper.insertBefore(e)}else{$pluginElementsWrapper.insertAfter(e)}}if(j.characterCounterNeeded){$characterCounterSpan=$('<span>',{'class':'counterT character-counter red','text':0});if(j.shortFormat){$characterCounterSpan.appendTo($pluginElementsWrapper);var f=$('<span>',{'html':j.shortFormatSeparator}).appendTo($pluginElementsWrapper)}else{var g=$('<div>',{'class':'character-counter-wrapper','html':j.charactersTypedSuffix});g.prepend($characterCounterSpan);g.appendTo($pluginElementsWrapper)}}if(j.charactersRemainingNeeded){$charactersRemainingSpan=$('<span>',{'class':'counterT characters-remaining','text':j.maximumCharacters});if(j.shortFormat){$charactersRemainingSpan.appendTo($pluginElementsWrapper);var h=$('<span>',{'html':j.charactersLabel}).insertAfter($charactersRemainingSpan)}else{var i=$('<div>',{'class':'characters-remaining-wrapper','html':j.charactersRemainingSuffixText});i.prepend($charactersRemainingSpan);i.appendTo($pluginElementsWrapper)}}e.keyup(function(){var a=e.val();var b=a.length;var c=j.maximumCharacters-b;var d=$('.counterT');if(c<0&&j.chopText){e.val(a.substr(0,j.maximumCharacters));c=0;b=j.maximumCharacters}if(b<j.minimumCharacters){d.addClass('red').removeClass('green')}else{d.addClass('green').removeClass('red')}if(j.characterCounterNeeded){d.text(b)}if(j.charactersRemainingNeeded){$charactersRemainingSpan.text(c);if(c<=0){if(!$charactersRemainingSpan.hasClass(j.limitExceededClass)){$charactersRemainingSpan.addClass(j.limitExceededClass)}}else{$charactersRemainingSpan.removeClass(j.limitExceededClass)}}})});return this}})(jQuery);